{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/nbins/Documents/GitHub/SRSRSR/Template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/nbins/Documents/GitHub/SRSRSR/Template/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/nbins/Documents/GitHub/SRSRSR/Template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/nbins/Documents/GitHub/SRSRSR/Template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\nbins\\\\Documents\\\\GitHub\\\\SRSRSR\\\\Template\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Fragment,useState}from\"react\";import{Link}from\"react-router-dom\";import{toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setAuth=_ref.setAuth;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var email=inputs.email,password=inputs.password;var _onChange=function onChange(e){return setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmitForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var body,response,parseRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;body={email:email,password:password};_context.next=5;return fetch(\"/auth/login\",{credentials:\"include\",method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify(body)});case 5:response=_context.sent;_context.next=8;return response.json();case 8:parseRes=_context.sent;if(parseRes.jwtToken){localStorage.setItem(\"token\",parseRes.jwtToken);setAuth(true);toast.success(\"Logged in Successfully\");}else{setAuth(false);toast.error(parseRes);}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function onSubmitForm(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 text-center\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitForm,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",type:\"text\",name:\"email\",value:email,onChange:function onChange(e){return _onChange(e);},className:\"form-control my-3\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",type:\"password\",name:\"password\",value:password,onChange:function onChange(e){return _onChange(e);},className:\"form-control my-3\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-block\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/admin/register\",children:\"Register\"})]});};export default Login;","map":{"version":3,"sources":["C:/Users/nbins/Documents/GitHub/SRSRSR/Template/src/views/loginPage/login.js"],"names":["React","Fragment","useState","Link","toast","Login","setAuth","email","password","inputs","setInputs","onChange","e","target","name","value","onSubmitForm","preventDefault","body","fetch","credentials","method","headers","JSON","stringify","response","json","parseRes","jwtToken","localStorage","setItem","success","error","console","message"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,KAA0C,OAA1C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAC7B,cAA4BJ,QAAQ,CAAC,CACnCK,KAAK,CAAE,EAD4B,CAEnCC,QAAQ,CAAE,EAFyB,CAAD,CAApC,wCAAOC,MAAP,eAAeC,SAAf,eAKA,GAAQH,CAAAA,KAAR,CAA4BE,MAA5B,CAAQF,KAAR,CAAeC,QAAf,CAA4BC,MAA5B,CAAeD,QAAf,CAEA,GAAMG,CAAAA,SAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,CAAC,QAChBF,CAAAA,SAAS,gCAAMD,MAAN,wBAAeG,CAAC,CAACC,MAAF,CAASC,IAAxB,CAA+BF,CAAC,CAACC,MAAF,CAASE,KAAxC,GADO,EAAlB,CAGA,GAAMC,CAAAA,YAAY,2FAAG,iBAAMJ,CAAN,6IACnBA,CAAC,CAACK,cAAF,GADmB,gBAGXC,IAHW,CAGJ,CAAEX,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAHI,uBAIMW,CAAAA,KAAK,CAC1B,aAD0B,CAE1B,CACEC,WAAW,CAAE,SADf,CAEEC,MAAM,CAAE,MAFV,CAGEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAHX,CAMEJ,IAAI,CAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf,CANR,CAF0B,CAJX,QAIXO,QAJW,qCAgBMA,CAAAA,QAAQ,CAACC,IAAT,EAhBN,QAgBXC,QAhBW,eAkBjB,GAAIA,QAAQ,CAACC,QAAb,CAAuB,CACrBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,QAAQ,CAACC,QAAvC,EACAtB,OAAO,CAAC,IAAD,CAAP,CACAF,KAAK,CAAC2B,OAAN,CAAc,wBAAd,EACD,CAJD,IAIO,CACLzB,OAAO,CAAC,KAAD,CAAP,CACAF,KAAK,CAAC4B,KAAN,CAAYL,QAAZ,EACD,CAzBgB,iFA2BjBM,OAAO,CAACD,KAAR,CAAc,YAAIE,OAAlB,EA3BiB,qEAAH,kBAAZlB,CAAAA,YAAY,6CAAlB,CA+BA,mBACE,MAAC,QAAD,yBACE,WAAI,SAAS,CAAC,kBAAd,mBADF,cAEE,cAAM,QAAQ,CAAEA,YAAhB,wBACE,cACE,WAAW,CAAC,OADd,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAET,KAJT,CAKE,QAAQ,CAAE,kBAAAK,CAAC,QAAID,CAAAA,SAAQ,CAACC,CAAD,CAAZ,EALb,CAME,SAAS,CAAC,mBANZ,EADF,cASE,aATF,cAUE,aAVF,cAWE,cACE,WAAW,CAAC,UADd,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAEJ,QAJT,CAKE,QAAQ,CAAE,kBAAAI,CAAC,QAAID,CAAAA,SAAQ,CAACC,CAAD,CAAZ,EALb,CAME,SAAS,CAAC,mBANZ,EAXF,cAmBE,aAnBF,cAoBE,aApBF,cAqBE,eAAQ,SAAS,CAAC,2BAAlB,oBArBF,GAFF,cAyBE,aAzBF,cA0BE,KAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,sBA1BF,GADF,CA8BD,CAxED,CA0EA,cAAeP,CAAAA,KAAf","sourcesContent":["import React, { Fragment, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Login = ({ setAuth }) => {\r\n  const [inputs, setInputs] = useState({\r\n    email: \"\",\r\n    password: \"\"\r\n  });\r\n\r\n  const { email, password } = inputs;\r\n\r\n  const onChange = e =>\r\n    setInputs({ ...inputs, [e.target.name]: e.target.value });\r\n\r\n  const onSubmitForm = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      const body = { email, password };\r\n      const response = await fetch(\r\n        \"/auth/login\",\r\n        {\r\n          credentials: \"include\",\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify(body)\r\n        }\r\n      );\r\n\r\n      const parseRes = await response.json();\r\n\r\n      if (parseRes.jwtToken) {\r\n        localStorage.setItem(\"token\", parseRes.jwtToken);\r\n        setAuth(true);\r\n        toast.success(\"Logged in Successfully\");\r\n      } else {\r\n        setAuth(false);\r\n        toast.error(parseRes);\r\n      }\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <h1 className=\"mt-5 text-center\">Login</h1>\r\n      <form onSubmit={onSubmitForm}>\r\n        <input\r\n          placeholder=\"Email\"\r\n          type=\"text\"\r\n          name=\"email\"\r\n          value={email}\r\n          onChange={e => onChange(e)}\r\n          className=\"form-control my-3\"\r\n        />\r\n        <br></br>\r\n        <br></br>\r\n        <input\r\n          placeholder=\"Password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          value={password}\r\n          onChange={e => onChange(e)}\r\n          className=\"form-control my-3\"\r\n        />\r\n        <br></br>\r\n        <br></br>\r\n        <button className=\"btn btn-success btn-block\">Submit</button>\r\n      </form>\r\n      <br></br>\r\n      <Link to=\"/admin/register\">Register</Link>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}