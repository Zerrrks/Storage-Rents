{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/nbins/Documents/GitHub/SRSRSR/Template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Users/nbins/Documents/GitHub/SRSRSR/Template/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\nbins\\\\Documents\\\\GitHub\\\\SRSRSR\\\\Template\\\\src\\\\views\\\\loginPage\\\\dashboard.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"C:\\\\Users\\\\nbins\\\\Documents\\\\GitHub\\\\SRSRSR\\\\Template\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Dash = function Dash(_ref) {\n  _s();\n\n  var setAuth = _ref.setAuth;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var getProfile = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, parseData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(\"/dashboard/\", {\n                credentials: \"include\",\n                method: \"GET\",\n                headers: {\n                  jwt_token: localStorage.token\n                }\n              });\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              parseData = _context.sent;\n              setName(parseData.user_name);\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0.message);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function getProfile() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var logout = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n\n              try {\n                localStorage.removeItem(\"token\");\n                setAuth(false);\n                toast.success(\"Logout successfully\");\n              } catch (err) {\n                console.error(err.message);\n              }\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function logout(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getProfile();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mt-5\",\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Welcome \", name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: function onClick(e) {\n        return logout(e);\n      },\n      className: \"btn btn-primary\",\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Dash, \"yFX/thdr3dMdWKRwvTuphhEy2lc=\");\n\n_c = Dash;\nexport default Dash;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dash\");","map":{"version":3,"sources":["C:/Users/nbins/Documents/GitHub/SRSRSR/Template/src/views/loginPage/dashboard.js"],"names":["React","useEffect","useState","toast","Dash","setAuth","name","setName","getProfile","fetch","credentials","method","headers","jwt_token","localStorage","token","res","json","parseData","user_name","console","error","message","logout","e","preventDefault","removeItem","success","err"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,KAAT,QAAsB,gBAAtB;;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,OAAiB;AAAA;;AAAA,MAAdC,OAAc,QAAdA,OAAc;;AAC5B,kBAAwBH,QAAQ,CAAC,EAAD,CAAhC;AAAA;AAAA,MAAOI,IAAP;AAAA,MAAaC,OAAb;;AAEA,MAAMC,UAAU;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEGC,KAAK,CAAC,aAAD,EAAgB;AACrCC,gBAAAA,WAAW,EAAE,SADwB;AAErCC,gBAAAA,MAAM,EAAE,KAF6B;AAGrCC,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,SAAS,EAAEC,YAAY,CAACC;AAA1B;AAH4B,eAAhB,CAFR;;AAAA;AAETC,cAAAA,GAFS;AAAA;AAAA,qBAQSA,GAAG,CAACC,IAAJ,EART;;AAAA;AAQTC,cAAAA,SARS;AASfX,cAAAA,OAAO,CAACW,SAAS,CAACC,SAAX,CAAP;AATe;AAAA;;AAAA;AAAA;AAAA;AAWfC,cAAAA,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB;;AAXe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVd,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAeA,MAAMe,MAAM;AAAA,yEAAG,kBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AACbA,cAAAA,CAAC,CAACC,cAAF;;AACA,kBAAI;AACFX,gBAAAA,YAAY,CAACY,UAAb,CAAwB,OAAxB;AACArB,gBAAAA,OAAO,CAAC,KAAD,CAAP;AACAF,gBAAAA,KAAK,CAACwB,OAAN,CAAc,qBAAd;AACD,eAJD,CAIE,OAAOC,GAAP,EAAY;AACZR,gBAAAA,OAAO,CAACC,KAAR,CAAcO,GAAG,CAACN,OAAlB;AACD;;AARY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAANC,MAAM;AAAA;AAAA;AAAA,KAAZ;;AAWAtB,EAAAA,SAAS,CAAC,YAAM;AACdO,IAAAA,UAAU;AACX,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE;AAAA,4BACE;AAAI,MAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAA,6BAAaF,IAAb;AAAA;AAAA;AAAA;AAAA;AAAA,aAFF,eAGE;AAAQ,MAAA,OAAO,EAAE,iBAAAkB,CAAC;AAAA,eAAID,MAAM,CAACC,CAAD,CAAV;AAAA,OAAlB;AAAiC,MAAA,SAAS,EAAC,iBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHF;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AASD,CA1CD;;GAAMpB,I;;KAAAA,I;AA4CN,eAAeA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Dash = ({ setAuth }) => {\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const getProfile = async () => {\r\n    try {\r\n      const res = await fetch(\"/dashboard/\", {\r\n        credentials: \"include\",\r\n        method: \"GET\",\r\n        headers: { jwt_token: localStorage.token }\r\n      });\r\n\r\n      const parseData = await res.json();\r\n      setName(parseData.user_name);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const logout = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      localStorage.removeItem(\"token\");\r\n      setAuth(false);\r\n      toast.success(\"Logout successfully\");\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProfile();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"mt-5\">Dashboard</h1>\r\n      <h2>Welcome {name}</h2>\r\n      <button onClick={e => logout(e)} className=\"btn btn-primary\">\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dash;\r\n"]},"metadata":{},"sourceType":"module"}